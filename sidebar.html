<!doctype html>
<html lang="it">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta http-equiv="Content-Security-Policy" content="frame-ancestors 'self';" />
    
    <title>Sidebar Navigation</title>
    <link rel="stylesheet" href="styles.css" />
</head>

<body>
    <div id="sidebar">
        <!-- ðŸ”· Testata utente -->
        <div id="userBox">
            <!-- ðŸ”” Icona notifiche nell'angolo in alto a destra del box -->
            <div id="notificationsIcon" onclick="openNotifications()">
                <img src="icone/notification.svg" alt="Notifications" />
                <span id="notificationBadge" class="notification-badge" style="display: none;">0</span>
            </div>
            
            <br />
            <p id="welcomeMessage">Welcome</p>
            <img id="userAvatar" src="icone/default-avatar.png" alt="Avatar" class="avatar" />
            <p id="userEmail">Email</p>
        </div>

        <!-- âœ… Tutto sotto: invariato -->
        <button class="sidebar-button" onclick="navigateTo('index.html')">
            <img src="/todolist/icone/home.svg" class="menu-icon" alt="Home" />
            Home
        </button>

        <button class="sidebar-button" onclick="navigateTo('todolist.html')">
            <img src="/todolist/icone/shopping_list.svg" class="menu-icon" alt="To-Buy" />
            Shopping list
        </button>

        <button class="sidebar-button" onclick="navigateTo('notes-home.html')">
            <img src="/todolist/icone/note.svg" class="menu-icon" alt="Note" />
            Notes
        </button>

        <button class="sidebar-button" onclick="navigateTo('ricettelista.html')">
            <img src="/todolist/icone/recipe.svg" class="menu-icon" alt="Recipes" />
            Recipes
        </button><br />
        <button class="sidebar-button" onclick="navigateTo('profile.html')">
            <img src="/todolist/icone/profile.svg" class="menu-icon" alt="profile" />
            Profile
        </button>
        <button class="sidebar-button" onclick="navigateTo('settings.html')">
            <img src="/todolist/icone/settings.svg" class="menu-icon" alt="settings" />
            Settings
        </button>
        <button class="sidebar-button" onclick="navigateTo('faq.html')">
            <img src="/todolist/icone/faq.svg" class="menu-icon" alt="FAQ" />
            FAQ
        </button>
        <button class="sidebar-button" onclick="logoutUser()" title="Logout">
            <img src="/todolist/icone/log_out.svg" class="menu-icon" alt="Logout" />
            Logout
        </button>
    </div>

    <!-- Modal per le notifiche -->
    <div id="notificationsModal" class="notifications-modal" style="display: none;">
        <div class="notifications-modal-content">
            <div class="notifications-header">
                <h3>Notifiche</h3>
                <button class="close-notifications" onclick="closeNotifications()">&times;</button>
            </div>
            <div class="notifications-list" id="notificationsList">
                <!-- Le notifiche vengono caricate dinamicamente -->
            </div>
            <div class="notifications-footer">
                <button class="mark-all-read-btn" id="markAllReadBtn" onclick="markAllAsRead()">
                    Segna tutte come lette
                </button>
                <button class="delete-all-btn" id="deleteAllBtn" onclick="deleteAllNotifications()">
                    Cancella tutte
                </button>
            </div>
        </div>
    </div>

    <button id="openSidebar" onclick="toggleSidebar()">â˜°â˜°</button>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const sidebar = document.getElementById("sidebar");
            const openSidebarButton = document.getElementById("openSidebar");

            if (!sidebar || !openSidebarButton) {
                console.warn("âš  Sidebar o pulsante non trovati!");
                return;
            }

            openSidebarButton.addEventListener("click", function () {
                sidebar.style.left = sidebar.style.left === "0px" ? "-300px" : "0px";
                console.log("ðŸ”„ Sidebar toggled:", sidebar.style.left);
            });

            console.log("[âœ“] Sidebar attivata manualmente in sidebar.html");
        });

    </script>
</body>

</html>